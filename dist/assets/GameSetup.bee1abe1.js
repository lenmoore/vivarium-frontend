import{h as S,o as d,a as p,i as a,m as u,by as _,p as v,F as $,j as x,u as q,l as U,f as G,g as V,r as I,k as o,t as c,q as C,s as B}from"./index.d52b5046.js";import{S as w}from"./performances.types.0d3e5e1a.js";const N={class:"game-step"},j=a("span",null," K\xFCsimus ",-1),P={class:"values d-flex w-25 justify-content-between"},T={class:""},L=a("span",null,null,-1),k={__name:"GameStep",props:{step:w},setup(b){const i=b;console.log("gamestep");const l=S(i.step);function y(){l.value.question_options||(l.value.question_options=[]),l.value.question_options.push({option_text:"",humanity_values:{green:0,fuchsia:0,blue:0,orange:0}})}function s(){console.log("todo delete step")}return(g,r)=>(d(),p("div",N,[a("div",{class:"top d-flex align-items-center justify-content-between w-100"},[j,a("button",{onClick:s},"Kustuta")]),a("div",null,[u(_,{id:"question_text",modelValue:l.value.question_text,"onUpdate:modelValue":r[0]||(r[0]=t=>l.value.question_text=t),label:"question_text",name:"question_text",type:"text"},null,8,["modelValue"])]),a("div",null,[v(" variandid "),(d(!0),p($,null,x(l.value.question_options,(t,e)=>(d(),p("div",{key:`option_${e}`,class:"d-flex align-items-center justify-content-between"},[u(_,{id:`option_${e}`,modelValue:t.option_text,"onUpdate:modelValue":n=>t.option_text=n,name:`option_${e}`,class:"w-100 mr-2",label:"option_text",type:"text"},null,8,["id","modelValue","onUpdate:modelValue","name"]),a("span",P,[u(_,{id:`option_green_${e}`,modelValue:t.humanity_values.green,"onUpdate:modelValue":n=>t.humanity_values.green=n,name:`option_green_${e}`,"input-class":"small-number green",label:"laim",type:"number"},null,8,["id","modelValue","onUpdate:modelValue","name"]),u(_,{id:`option_blue_${e}`,modelValue:t.humanity_values.blue,"onUpdate:modelValue":n=>t.humanity_values.blue=n,name:`option_blue_${e}`,"input-class":"small-number blue",label:"silver",type:"number"},null,8,["id","modelValue","onUpdate:modelValue","name"]),u(_,{id:`option_fuchsia_${e}`,modelValue:t.humanity_values.fuchsia,"onUpdate:modelValue":n=>t.humanity_values.fuchsia=n,name:`option_fuchsia_${e}`,"input-class":"small-number fuchsia",label:"fchs",type:"number"},null,8,["id","modelValue","onUpdate:modelValue","name"]),u(_,{id:`option_orange_${e}`,modelValue:t.humanity_values.orange,"onUpdate:modelValue":n=>t.humanity_values.orange=n,name:`option_orange_${e}`,"input-class":"small-number orange",label:"blue",type:"number"},null,8,["id","modelValue","onUpdate:modelValue","name"])])]))),128)),a("div",null,[a("button",{class:"btn btn-icon",onClick:y}," + variant ")])]),a("div",T,[L,a("button",{class:"btn btn-primary",onClick:r[1]||(r[1]=t=>g.$emit("submit",l.value))}," salvesta ")])]))}},R={key:0,class:"pt-4"},E={key:0},F=["id"],K={key:1},A={class:"mt-4"},O={__name:"GameSetup",setup(b){const i=q(),l=U.currentRoute.value.params.id;G(async()=>{await i.getGames(),await i.getPhases()});const y=V(()=>i.getActivePhase);let s=V(()=>i.getGame(l)),g=new w({question_text:"",question_options:[]});async function r(e){let n=s.value,h=[];e.question_options.forEach(m=>{h.push({...m,humanity_values:{red:parseInt(m.humanity_values.fuchsia||0),fuchsia:parseInt(m.humanity_values.fuchsia||0),green:parseInt(m.humanity_values.green||0),blue:parseInt(m.humanity_values.blue||0),orange:parseInt(m.humanity_values.orange||0)}})}),n.game_steps.push({...e,question_options:h}),await i.editGame(n),window.location.reload()}async function t(e){s.value.game_steps.push(e),await i.editGame(s.value)}return(e,n)=>{const h=I("RouterLink");return o(s)?(d(),p("div",R,[a("h4",null,c(o(s).name),1),a("small",null," Gruppidele: "+c(o(s).open_for_colors)+" | Type: "+c(o(s).game_type)+" | "+c(o(s).pre_capsule?"enne kapslisse minekut":"kapslis"),1),o(s).game_type==="QUIZ"?(d(),p("div",E,[v(" lisa uus: "),u(k,{id:"new-step",step:o(g),onSubmit:r},null,8,["step"]),v(" kysimused, 2ra muuta proovi, see interface on tsipa katki - teen millalgi korda: "),(d(!0),p($,null,x(o(s).game_steps,(m,f)=>(d(),p("div",{id:`step_${f}`,key:`step_${f}`},[u(k,{step:m,onSubmit:t},null,8,["step"])],8,F))),128))])):(d(),p("div",K,[v(c(o(y)?"aktiivne":"ei ole aktiivne")+" ",1),a("div",A,[u(h,{to:{name:"superadmin.games.humanity-shop"}},{default:C(()=>[v(" Vaata tooteid ")]),_:1},8,["to"])])]))])):B("",!0)}}};export{O as default};
