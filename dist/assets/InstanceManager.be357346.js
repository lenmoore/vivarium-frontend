import{o as r,a as o,i as s,t as d,n as v,F as b,j as P,m as h,u as f,f as k,g as m,k as t,p as A,s as x,bA as C}from"./index.d52b5046.js";import{P as $}from"./performances.types.0d3e5e1a.js";const S={__name:"Phase",props:{phase:$},setup(l){const n=l;return(c,e)=>(r(),o("div",{class:v([{active:n.phase.active},"phase"])},[s("h5",null,"Phase "+d(n.phase.name),1),s("button",{class:v([{"btn-primary active":n.phase.active,"btn-outline-primary":!n.phase.active},"btn"]),onClick:e[0]||(e[0]=u=>c.$emit("toggle"))},d(n.phase.active?"stop":"start"),3)],2))}},B={__name:"PhaseManager",props:{phases:Array},setup(l){const n=l;function c(e){console.log(e),f().editPhase(e)}return(e,u)=>(r(),o("div",null,[(r(!0),o(b,null,P(n.phases,i=>(r(),o("div",{key:i._id},[h(S,{phase:i,onToggle:a=>c(i)},null,8,["phase","onToggle"])]))),128))]))}};const M={key:0},T={class:"pt-4"},V=s("h2",null,"Faasid",-1),w={class:"performance-settings"},I=s("h3",null,"Seaded",-1),N={class:"d-flex"},j={__name:"InstanceManager",setup(l){const c=C().params.id,e=f();k(async()=>{await e.getPhases(),await e.getPerformances();const p=m(()=>e.getActivePerformance);await e.getCurrentPerformanceVisitors(p.value._id)});const u=m(()=>e.performances),i=m(()=>e.phases),a=u.value.find(p=>p._id===c);e.getPerformanceById(c);async function g(){return await e.archiveWholeAudience(a)}return(p,_)=>(r(),o("div",null,[t(a)._id?(r(),o("div",M,[s("h1",null,d(t(a).title),1),A(" "+d(t(a).date.split("T")[0])+" ",1),s("div",T,[V,h(B,{phases:t(i)},null,8,["phases"])]),s("div",w,[I,s("div",N,[t(a).active?(r(),o("button",{key:0,class:"btn btn-outline-primary",onClick:_[0]||(_[0]=y=>t(e).setInactivePerformance(t(a)))}," Lopeta etendus ")):(r(),o("button",{key:1,class:"btn btn-outline-primary",onClick:_[1]||(_[1]=y=>t(e).setActivePerformance(t(a)))}," Alusta etendust ")),s("button",{class:"btn btn-primary",onClick:g}," Arhiveeri kogu publik ")])])])):x("",!0)]))}};export{j as default};
