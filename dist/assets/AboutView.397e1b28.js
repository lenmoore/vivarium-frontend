import{d as N,f as q,h as w,e as z,k as h,o as l,a as i,i as s,t as _,n as D,F as B,j as A,s as m,p as F}from"./index.73886189.js";import{u as H}from"./humanity-shop.store.daff031c.js";const R={key:0,class:"container"},j={key:0},L=s("h4",null,"Votad kapslisse kaasa",-1),M={class:"d-flex flex-wrap"},Q=["src"],T={key:1},G=s("h4",null,"Valikud",-1),J={style:{"font-size":"10px"}},U={__name:"AboutView",setup(K){const v=N(),C=H();q(async()=>{localStorage.getItem("admin")&&(await v.fetchVisitor(localStorage.getItem("visitorId")),await C.getVisitorBasket())});let n=w(v.getVisitor);const u=z(n.value.quiz_results),r=z(n.value.basket);function E(){var t;let o=[],a={green:0,red:0,blue:0,orange:0};return(t=r==null?void 0:r.products)==null||t.forEach(e=>{var g,y,f,c,k,b,d,V,x,I,S;o.push(e),a.green+=(y=(g=e==null?void 0:e.humanity_values)==null?void 0:g.green)==null?void 0:y.average,a.red+=(f=e==null?void 0:e.humanity_values)!=null&&f.red?(k=(c=e==null?void 0:e.humanity_values)==null?void 0:c.red)==null?void 0:k.average:(d=(b=e==null?void 0:e.humanity_values)==null?void 0:b.fuchsia)==null?void 0:d.average,a.blue+=(x=(V=e==null?void 0:e.humanity_values)==null?void 0:V.blue)==null?void 0:x.average,a.orange+=(S=(I=e==null?void 0:e.humanity_values)==null?void 0:I.orange)==null?void 0:S.average}),u.forEach(e=>{o.push(e),a.green+=parseInt(e.result_humanity_values.green||0)||0,a.red+=parseInt(e.result_humanity_values.red||e.result_humanity_values.fuchsia)||0,a.blue+=parseInt(e.result_humanity_values.blue)||0,a.orange+=parseInt(e.result_humanity_values.orange)||0}),console.log(o),a}return n&&r&&u&&w(E()),(o,a)=>h(n)&&u?(l(),i("div",R,[s("div",null,[s("h2",null,"ID "+_(h(n).wardrobe_number)+" Character sheet",1),s("h2",{class:D(h(n).confirmed_humanity_value)},_(h(n).confirmed_humanity_value),3)]),s("div",null,[r?(l(),i("div",j,[L,s("div",M,[(l(!0),i(B,null,A(r.products,(t,e)=>(l(),i("div",{key:"product"+e,class:"d-flex flex-column align-items-center border m-1"},[s("img",{src:t.image,alt:"",height:"100"},null,8,Q),s("small",null,_(t.title),1)]))),128))])])):m("",!0),u.length?(l(),i("div",T,[G,(l(!0),i(B,null,A(u,(t,e)=>(l(),i("div",{key:"selected"+e,class:"border"},[F(_(t.result_text)+" ",1),s("small",J,_(t.result_humanity_values),1)]))),128))])):m("",!0)])])):m("",!0)}};export{U as default};
